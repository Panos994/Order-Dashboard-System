{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'User',\n      orders: [],\n      //productId: '',\n      quantity: '',\n      products: [],\n      // Store all products\n      selectedProductId: '',\n      // Stores the selected product ID\n\n      totalCost: ''\n    };\n  },\n  created() {\n    this.checkUserRole();\n    this.fetchOrders();\n    this.fetchProducts(); // Load products when page loads\n  },\n  methods: {\n    checkUserRole() {\n      const role = localStorage.getItem('userRole');\n      if (role !== 'ROLE_USER') {\n        this.$router.push('/login'); // Prevent unauthorized access\n      }\n    },\n    async fetchOrders() {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          this.$router.push('/login');\n          return;\n        }\n        const response = await axios.get('http://localhost:9090/api/orders', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.orders = response.data;\n      } catch (error) {\n        console.error(error);\n        this.$router.push('/login');\n      }\n    },\n    async fetchProducts() {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get('http://localhost:9090/api/admin/products', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.products = response.data; // Store all available products\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async placeOrder() {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.post('http://localhost:9090/api/orders/submit', {\n          productId: this.selectedProductId,\n          quantity: this.quantity\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.orders.push(response.data);\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    handleLogout() {\n      localStorage.removeItem('token');\n      localStorage.removeItem('userRole');\n      localStorage.removeItem('username');\n      this.$router.push('/login');\n    }\n  }\n};","map":{"version":3,"names":["axios","data","username","localStorage","getItem","orders","quantity","products","selectedProductId","totalCost","created","checkUserRole","fetchOrders","fetchProducts","methods","role","$router","push","token","response","get","headers","Authorization","error","console","placeOrder","post","productId","handleLogout","removeItem"],"sources":["/home/it2021154/Desktop/QNR_OrderSystem/order-system-frontend/src/components/MainPage.vue"],"sourcesContent":["<template>\n  <div class=\"main-page\">\n    <div class=\"header\">\n      <h2>Welcome, {{ username }}</h2>\n      <button class=\"logout-btn\" @click=\"handleLogout\">Logout</button>\n    </div>\n\n    <div class=\"orders-section\">\n      <h3>Your Orders:</h3>\n      <ul v-if=\"orders.length\">\n        <li v-for=\"order in orders\" :key=\"order.id\">\n          <span><strong>Order ID:</strong>  {{ order.id }}</span>\n          <span><strong>Product:</strong> {{ order.product.name }}</span>\n          <span><strong>Quantity:</strong> {{ order.quantity }}</span>\n          <span><strong>Total Cost:</strong> {{ order.totalCost }} euros</span>\n        </li>\n      </ul>\n      <p v-else>No orders found.</p>\n    </div>\n\n    <div class=\"order-form\">\n      <h3>Place a New Order</h3>\n      <form @submit.prevent=\"placeOrder\">\n        <!--input v-model=\"productId\" type=\"text\" placeholder=\"Product ID\" required /-->\n\n        <!-- Dropdown for selecting a product -->\n        <label for=\"product\">Choose a product:</label>\n        <select v-model=\"selectedProductId\" required>\n          <option v-for=\"product in products\" :key=\"product.id\" :value=\"product.id\">\n            {{ product.name }}\n          </option>\n        </select>\n\n        <input v-model=\"quantity\" type=\"number\" placeholder=\"Quantity\" required />\n        <button type=\"submit\">Place Order</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'User',\n      orders: [],\n      //productId: '',\n      quantity: '',\n      products: [], // Store all products\n      selectedProductId: '', // Stores the selected product ID\n\n\n      totalCost:''\n    };\n  },\n  created() {\n    this.checkUserRole();\n    this.fetchOrders();\n\n    this.fetchProducts(); // Load products when page loads\n  },\n  methods: {\n    checkUserRole() {\n      const role = localStorage.getItem('userRole');\n      if (role !== 'ROLE_USER') {\n        this.$router.push('/login'); // Prevent unauthorized access\n      }\n    },\n\n    async fetchOrders() {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          this.$router.push('/login');\n          return;\n        }\n\n        const response = await axios.get('http://localhost:9090/api/orders', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.orders = response.data;\n      } catch (error) {\n        console.error(error);\n        this.$router.push('/login');\n      }\n    },\n\n    async fetchProducts() {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get('http://localhost:9090/api/admin/products', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.products = response.data; // Store all available products\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    async placeOrder() {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.post(\n            'http://localhost:9090/api/orders/submit',\n            { productId: this.selectedProductId, quantity: this.quantity },\n            { headers: { Authorization: `Bearer ${token}` } }\n        );\n        this.orders.push(response.data);\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    handleLogout() {\n      localStorage.removeItem('token');\n      localStorage.removeItem('userRole');\n      localStorage.removeItem('username');\n      this.$router.push('/login');\n    },\n  },\n};\n</script>\n\n\n<style scoped>\n.main-page {\n  max-width: 600px;\n  margin: 40px auto;\n  padding: 20px;\n  background: #f9f9f9;\n  border-radius: 10px;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.logout-btn {\n  padding: 8px 16px;\n  background: #d9534f;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.logout-btn:hover {\n  background: #c9302c;\n}\n\n.orders-section {\n  margin-top: 20px;\n}\n\n.orders-section ul {\n  list-style: none;\n  padding: 0;\n}\n\n.orders-section li {\n  background: white;\n  padding: 10px;\n  margin: 5px 0;\n  border-radius: 5px;\n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.order-form {\n  margin-top: 20px;\n}\n\n.order-form form {\n  display: flex;\n  flex-direction: column;\n}\n\n.order-form input {\n  margin: 5px 0;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n}\n\n.order-form button {\n  margin-top: 10px;\n  padding: 10px;\n  background: #5cb85c;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.order-form button:hover {\n  background: #4cae4c;\n}\n\n\n .orders-section li span {\n   display: inline-block;\n   margin-right: 10px; /* Adjust spacing between spans */\n }\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}