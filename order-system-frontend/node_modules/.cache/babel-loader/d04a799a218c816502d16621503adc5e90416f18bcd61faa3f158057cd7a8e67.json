{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelSelect as _vModelSelect, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"main-page\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"orders-section\"\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  key: 1\n};\nconst _hoisted_6 = {\n  class: \"order-form\"\n};\nconst _hoisted_7 = [\"value\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h2\", null, \"Welcome, \" + _toDisplayString($data.username), 1 /* TEXT */), _createElementVNode(\"button\", {\n    class: \"logout-btn\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.handleLogout && $options.handleLogout(...args))\n  }, \"Logout\")]), _createElementVNode(\"div\", _hoisted_3, [_cache[9] || (_cache[9] = _createElementVNode(\"h3\", null, \"Your Orders:\", -1 /* HOISTED */)), $data.orders.length ? (_openBlock(), _createElementBlock(\"ul\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.orders, order => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: order.id\n    }, [_createElementVNode(\"span\", null, [_cache[5] || (_cache[5] = _createElementVNode(\"strong\", null, \"Order ID:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(order.id), 1 /* TEXT */)]), _createElementVNode(\"span\", null, [_cache[6] || (_cache[6] = _createElementVNode(\"strong\", null, \"Product:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(order.product.name), 1 /* TEXT */)]), _createElementVNode(\"span\", null, [_cache[7] || (_cache[7] = _createElementVNode(\"strong\", null, \"Quantity:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(order.quantity), 1 /* TEXT */)]), _createElementVNode(\"span\", null, [_cache[8] || (_cache[8] = _createElementVNode(\"strong\", null, \"Total Cost:\", -1 /* HOISTED */)), _createTextVNode(\" \" + _toDisplayString(order.totalCost) + \" euros\", 1 /* TEXT */)])]);\n  }), 128 /* KEYED_FRAGMENT */))])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_5, \"No orders found.\"))]), _createElementVNode(\"div\", _hoisted_6, [_cache[12] || (_cache[12] = _createElementVNode(\"h3\", null, \"Place a New Order\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[4] || (_cache[4] = _withModifiers((...args) => $options.placeOrder && $options.placeOrder(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.productId = $event),\n    type: \"text\",\n    placeholder: \"Product ID\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.productId]]), _createCommentVNode(\" Dropdown for selecting a product \"), _cache[10] || (_cache[10] = _createElementVNode(\"label\", {\n    for: \"product\"\n  }, \"Choose a product:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.selectedProductId = $event),\n    required: \"\"\n  }, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.products, product => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: product.id,\n      value: product.id\n    }, _toDisplayString(product.name), 9 /* TEXT, PROPS */, _hoisted_7);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.selectedProductId]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.quantity = $event),\n    type: \"number\",\n    placeholder: \"Quantity\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.quantity]]), _cache[11] || (_cache[11] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Place Order\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","$data","username","onClick","_cache","args","$options","handleLogout","_hoisted_3","orders","length","_hoisted_4","_Fragment","_renderList","order","id","_createTextVNode","product","name","quantity","totalCost","_hoisted_5","_hoisted_6","onSubmit","_withModifiers","placeOrder","$event","productId","type","placeholder","required","_createCommentVNode","for","selectedProductId","products","value","_hoisted_7"],"sources":["/home/it2021154/Desktop/QNR_OrderSystem/order-system-frontend/src/components/MainPage.vue"],"sourcesContent":["<template>\n  <div class=\"main-page\">\n    <div class=\"header\">\n      <h2>Welcome, {{ username }}</h2>\n      <button class=\"logout-btn\" @click=\"handleLogout\">Logout</button>\n    </div>\n\n    <div class=\"orders-section\">\n      <h3>Your Orders:</h3>\n      <ul v-if=\"orders.length\">\n        <li v-for=\"order in orders\" :key=\"order.id\">\n          <span><strong>Order ID:</strong>  {{ order.id }}</span>\n          <span><strong>Product:</strong> {{ order.product.name }}</span>\n          <span><strong>Quantity:</strong> {{ order.quantity }}</span>\n          <span><strong>Total Cost:</strong> {{ order.totalCost }} euros</span>\n        </li>\n      </ul>\n      <p v-else>No orders found.</p>\n    </div>\n\n    <div class=\"order-form\">\n      <h3>Place a New Order</h3>\n      <form @submit.prevent=\"placeOrder\">\n        <input v-model=\"productId\" type=\"text\" placeholder=\"Product ID\" required />\n\n        <!-- Dropdown for selecting a product -->\n        <label for=\"product\">Choose a product:</label>\n        <select v-model=\"selectedProductId\" required>\n          <option v-for=\"product in products\" :key=\"product.id\" :value=\"product.id\">\n            {{ product.name }}\n          </option>\n        </select>\n\n        <input v-model=\"quantity\" type=\"number\" placeholder=\"Quantity\" required />\n        <button type=\"submit\">Place Order</button>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'User',\n      orders: [],\n      productId: '',\n      quantity: '',\n      products: [], // Store all products\n      selectedProductId: '', // Stores the selected product ID\n\n\n      totalCost:''\n    };\n  },\n  created() {\n    this.checkUserRole();\n    this.fetchOrders();\n\n    this.fetchProducts(); // Load products when page loads\n  },\n  methods: {\n    checkUserRole() {\n      const role = localStorage.getItem('userRole');\n      if (role !== 'ROLE_USER') {\n        this.$router.push('/login'); // Prevent unauthorized access\n      }\n    },\n\n    async fetchOrders() {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          this.$router.push('/login');\n          return;\n        }\n\n        const response = await axios.get('http://localhost:9090/api/orders', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.orders = response.data;\n      } catch (error) {\n        console.error(error);\n        this.$router.push('/login');\n      }\n    },\n\n    async fetchProducts() {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.get('http://localhost:9090/api/admin/products', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.products = response.data; // Store all available products\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    async placeOrder() {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.post(\n            'http://localhost:9090/api/orders/submit',\n            { productId: this.productId, quantity: this.quantity },\n            { headers: { Authorization: `Bearer ${token}` } }\n        );\n        this.orders.push(response.data);\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    handleLogout() {\n      localStorage.removeItem('token');\n      localStorage.removeItem('userRole');\n      localStorage.removeItem('username');\n      this.$router.push('/login');\n    },\n  },\n};\n</script>\n\n\n<style scoped>\n.main-page {\n  max-width: 600px;\n  margin: 40px auto;\n  padding: 20px;\n  background: #f9f9f9;\n  border-radius: 10px;\n  box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.logout-btn {\n  padding: 8px 16px;\n  background: #d9534f;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.logout-btn:hover {\n  background: #c9302c;\n}\n\n.orders-section {\n  margin-top: 20px;\n}\n\n.orders-section ul {\n  list-style: none;\n  padding: 0;\n}\n\n.orders-section li {\n  background: white;\n  padding: 10px;\n  margin: 5px 0;\n  border-radius: 5px;\n  box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1);\n}\n\n.order-form {\n  margin-top: 20px;\n}\n\n.order-form form {\n  display: flex;\n  flex-direction: column;\n}\n\n.order-form input {\n  margin: 5px 0;\n  padding: 8px;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n}\n\n.order-form button {\n  margin-top: 10px;\n  padding: 10px;\n  background: #5cb85c;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n}\n\n.order-form button:hover {\n  background: #4cae4c;\n}\n\n\n .orders-section li span {\n   display: inline-block;\n   margin-right: 10px; /* Adjust spacing between spans */\n }\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAAQ;;EAKdA,KAAK,EAAC;AAAgB;;EAP/BC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;EAoBSD,KAAK,EAAC;AAAY;mBApB3B;;uBACEE,mBAAA,CAoCM,OApCNC,UAoCM,GAnCJC,mBAAA,CAGM,OAHNC,UAGM,GAFJD,mBAAA,CAAgC,YAA5B,WAAS,GAAAE,gBAAA,CAAGC,KAAA,CAAAC,QAAQ,kBACxBJ,mBAAA,CAAgE;IAAxDJ,KAAK,EAAC,YAAY;IAAES,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,YAAA,IAAAD,QAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;KAAE,QAAM,E,GAGzDP,mBAAA,CAWM,OAXNU,UAWM,G,0BAVJV,mBAAA,CAAqB,YAAjB,cAAY,sBACNG,KAAA,CAAAQ,MAAM,CAACC,MAAM,I,cAAvBd,mBAAA,CAOK,MAhBXe,UAAA,I,kBAUQf,mBAAA,CAKKgB,SAAA,QAfbC,WAAA,CAU4BZ,KAAA,CAAAQ,MAAM,EAAfK,KAAK;yBAAhBlB,mBAAA,CAKK;MALwBD,GAAG,EAAEmB,KAAK,CAACC;QACtCjB,mBAAA,CAAuD,e,0BAAjDA,mBAAA,CAA0B,gBAAlB,WAAS,sBAXjCkB,gBAAA,CAW0C,GAAE,GAAAhB,gBAAA,CAAGc,KAAK,CAACC,EAAE,iB,GAC7CjB,mBAAA,CAA+D,e,0BAAzDA,mBAAA,CAAyB,gBAAjB,UAAQ,sBAZhCkB,gBAAA,CAYyC,GAAC,GAAAhB,gBAAA,CAAGc,KAAK,CAACG,OAAO,CAACC,IAAI,iB,GACrDpB,mBAAA,CAA4D,e,0BAAtDA,mBAAA,CAA0B,gBAAlB,WAAS,sBAbjCkB,gBAAA,CAa0C,GAAC,GAAAhB,gBAAA,CAAGc,KAAK,CAACK,QAAQ,iB,GAClDrB,mBAAA,CAAqE,e,0BAA/DA,mBAAA,CAA4B,gBAApB,aAAW,sBAdnCkB,gBAAA,CAc4C,GAAC,GAAAhB,gBAAA,CAAGc,KAAK,CAACM,SAAS,IAAG,QAAM,gB;qDAGlExB,mBAAA,CAA8B,KAjBpCyB,UAAA,EAiBgB,kBAAgB,G,GAG5BvB,mBAAA,CAgBM,OAhBNwB,UAgBM,G,4BAfJxB,mBAAA,CAA0B,YAAtB,mBAAiB,sBACrBA,mBAAA,CAaO;IAbAyB,QAAM,EAAAnB,MAAA,QAAAA,MAAA,MAtBnBoB,cAAA,KAAAnB,IAAA,KAsB6BC,QAAA,CAAAmB,UAAA,IAAAnB,QAAA,CAAAmB,UAAA,IAAApB,IAAA,CAAU;sBAC/BP,mBAAA,CAA2E;IAvBnF,uBAAAM,MAAA,QAAAA,MAAA,MAAAsB,MAAA,IAuBwBzB,KAAA,CAAA0B,SAAS,GAAAD,MAAA;IAAEE,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC,YAAY;IAACC,QAAQ,EAAR;iDAAhD7B,KAAA,CAAA0B,SAAS,E,GAEzBI,mBAAA,sCAAyC,E,4BACzCjC,mBAAA,CAA8C;IAAvCkC,GAAG,EAAC;EAAS,GAAC,mBAAiB,sB,gBACtClC,mBAAA,CAIS;IA/BjB,uBAAAM,MAAA,QAAAA,MAAA,MAAAsB,MAAA,IA2ByBzB,KAAA,CAAAgC,iBAAiB,GAAAP,MAAA;IAAEI,QAAQ,EAAR;yBAClClC,mBAAA,CAESgB,SAAA,QA9BnBC,WAAA,CA4BoCZ,KAAA,CAAAiC,QAAQ,EAAnBjB,OAAO;yBAAtBrB,mBAAA,CAES;MAF4BD,GAAG,EAAEsB,OAAO,CAACF,EAAE;MAAGoB,KAAK,EAAElB,OAAO,CAACF;wBACjEE,OAAO,CAACC,IAAI,wBA7B3BkB,UAAA;2EA2ByBnC,KAAA,CAAAgC,iBAAiB,E,mBAMlCnC,mBAAA,CAA0E;IAjClF,uBAAAM,MAAA,QAAAA,MAAA,MAAAsB,MAAA,IAiCwBzB,KAAA,CAAAkB,QAAQ,GAAAO,MAAA;IAAEE,IAAI,EAAC,QAAQ;IAACC,WAAW,EAAC,UAAU;IAACC,QAAQ,EAAR;iDAA/C7B,KAAA,CAAAkB,QAAQ,E,+BACxBrB,mBAAA,CAA0C;IAAlC8B,IAAI,EAAC;EAAQ,GAAC,aAAW,qB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}