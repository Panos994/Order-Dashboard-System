{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nexport default {\n  data() {\n    return {\n      user: {\n        username: ''\n      },\n      orders: [],\n      productId: '',\n      quantity: ''\n    };\n  },\n  created() {\n    this.fetchUserData();\n  },\n  methods: {\n    async fetchUserData() {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          this.$router.push('/login');\n          return;\n        }\n\n        // Get user orders\n        const response = await axios.get('http://localhost:9090/api/orders', {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.orders = response.data;\n      } catch (error) {\n        console.error(error);\n        this.$router.push('/login');\n      }\n    },\n    async placeOrder() {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.post('http://localhost:9090/api/orders/submit', {\n          productId: this.productId,\n          quantity: this.quantity\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        this.orders.push(response.data); // Add new order to the list\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    handleLogout() {\n      localStorage.removeItem('token');\n      this.$router.push('/login'); // Redirect to login page\n    }\n  }\n};","map":{"version":3,"names":["axios","data","user","username","orders","productId","quantity","created","fetchUserData","methods","token","localStorage","getItem","$router","push","response","get","headers","Authorization","error","console","placeOrder","post","handleLogout","removeItem"],"sources":["/home/it2021154/Desktop/QNR_OrderSystem/order-system-frontend/src/components/MainPage.vue"],"sourcesContent":["<template>\n  <div class=\"main-page\">\n    <h2>Welcome, {{ user.username }}</h2>\n    <button @click=\"handleLogout\">Logout</button>\n\n    <h3>Your Orders:</h3>\n    <ul>\n      <li v-for=\"order in orders\" :key=\"order.id\">\n        Order ID: {{ order.id }} - Product: {{ order.product.name }} - Quantity: {{ order.quantity }}\n      </li>\n    </ul>\n\n    <h3>Place New Order</h3>\n    <form @submit.prevent=\"placeOrder\">\n      <input v-model=\"productId\" type=\"text\" placeholder=\"Product ID\" required />\n      <input v-model=\"quantity\" type=\"number\" placeholder=\"Quantity\" required />\n      <button type=\"submit\">Place Order</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      user: {\n        username: '',\n      },\n      orders: [],\n      productId: '',\n      quantity: '',\n    };\n  },\n  created() {\n    this.fetchUserData();\n  },\n  methods: {\n    async fetchUserData() {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          this.$router.push('/login');\n          return;\n        }\n\n        // Get user orders\n        const response = await axios.get('http://localhost:9090/api/orders', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.orders = response.data;\n\n\n      } catch (error) {\n        console.error(error);\n        this.$router.push('/login');\n      }\n    },\n\n    async placeOrder() {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.post(\n            'http://localhost:9090/api/orders/submit',\n            { productId: this.productId, quantity: this.quantity },\n            { headers: { Authorization: `Bearer ${token}` } }\n        );\n        this.orders.push(response.data); // Add new order to the list\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    handleLogout() {\n      localStorage.removeItem('token');\n      this.$router.push('/login'); // Redirect to login page\n    },\n  },\n};\n</script>\n"],"mappings":";AAsBA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAE;QACJC,QAAQ,EAAE;MACZ,CAAC;MACDC,MAAM,EAAE,EAAE;MACVC,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,aAAa,CAAC,CAAC;EACtB,CAAC;EACDC,OAAO,EAAE;IACP,MAAMD,aAAaA,CAAA,EAAG;MACpB,IAAI;QACF,MAAME,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,IAAI,CAACF,KAAK,EAAE;UACV,IAAI,CAACG,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;UAC3B;QACF;;QAEA;QACA,MAAMC,QAAO,GAAI,MAAMf,KAAK,CAACgB,GAAG,CAAC,kCAAkC,EAAE;UACnEC,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUR,KAAK;UAAG;QAC9C,CAAC,CAAC;QACF,IAAI,CAACN,MAAK,GAAIW,QAAQ,CAACd,IAAI;MAG7B,EAAE,OAAOkB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;QACpB,IAAI,CAACN,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;MAC7B;IACF,CAAC;IAED,MAAMO,UAAUA,CAAA,EAAG;MACjB,IAAI;QACF,MAAMX,KAAI,GAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAC3C,MAAMG,QAAO,GAAI,MAAMf,KAAK,CAACsB,IAAI,CAC7B,yCAAyC,EACzC;UAAEjB,SAAS,EAAE,IAAI,CAACA,SAAS;UAAEC,QAAQ,EAAE,IAAI,CAACA;QAAS,CAAC,EACtD;UAAEW,OAAO,EAAE;YAAEC,aAAa,EAAE,UAAUR,KAAK;UAAG;QAAE,CACpD,CAAC;QACD,IAAI,CAACN,MAAM,CAACU,IAAI,CAACC,QAAQ,CAACd,IAAI,CAAC,EAAE;MACnC,EAAE,OAAOkB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB;IACF,CAAC;IAEDI,YAAYA,CAAA,EAAG;MACbZ,YAAY,CAACa,UAAU,CAAC,OAAO,CAAC;MAChC,IAAI,CAACX,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC,EAAE;IAC/B;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}