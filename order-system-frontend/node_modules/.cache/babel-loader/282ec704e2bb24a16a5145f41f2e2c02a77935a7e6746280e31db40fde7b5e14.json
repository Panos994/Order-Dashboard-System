{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"main-page\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"h2\", null, \"Welcome, \" + _toDisplayString($data.username), 1 /* TEXT */), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.handleLogout && $options.handleLogout(...args))\n  }, \"Logout\"), _cache[6] || (_cache[6] = _createElementVNode(\"h3\", null, \"Your Orders:\", -1 /* HOISTED */)), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.orders, order => {\n    return _openBlock(), _createElementBlock(\"li\", {\n      key: order.id\n    }, \" Order ID: \" + _toDisplayString(order.id) + \" - Product: \" + _toDisplayString(order.product.name) + \" - Quantity: \" + _toDisplayString(order.quantity) + \" - Total Cost: \" + _toDisplayString(order.totalCost), 1 /* TEXT */);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"table\", null, [_cache[4] || (_cache[4] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Order ID:\"), _createElementVNode(\"th\", null, \"Product:\"), _createElementVNode(\"th\", null, \"Quantity:\"), _createElementVNode(\"th\", null, \"Total Cost:\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.orders, order => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: _ctx.user.id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(order.id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(order.product.name), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(order.quantity), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(order.totalCost), 1 /* TEXT */)]);\n  }), 128 /* KEYED_FRAGMENT */))])]), _cache[7] || (_cache[7] = _createElementVNode(\"h3\", null, \"Place New Order\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.placeOrder && $options.placeOrder(...args), [\"prevent\"]))\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.productId = $event),\n    type: \"text\",\n    placeholder: \"Product ID\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.productId]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.quantity = $event),\n    type: \"number\",\n    placeholder: \"Quantity\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.quantity]]), _cache[5] || (_cache[5] = _createElementVNode(\"button\", {\n    type: \"submit\"\n  }, \"Place Order\", -1 /* HOISTED */))], 32 /* NEED_HYDRATION */)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_toDisplayString","$data","username","onClick","_cache","args","$options","handleLogout","_Fragment","_renderList","orders","order","key","id","product","name","quantity","totalCost","_ctx","user","onSubmit","_withModifiers","placeOrder","$event","productId","type","placeholder","required"],"sources":["/home/it2021154/Desktop/QNR_OrderSystem/order-system-frontend/src/components/MainPage.vue"],"sourcesContent":["<template>\n  <div class=\"main-page\">\n    <h2>Welcome, {{ username }}</h2>\n    <button @click=\"handleLogout\">Logout</button>\n\n    <h3>Your Orders:</h3>\n    <ul>\n      <li v-for=\"order in orders\" :key=\"order.id\">\n        Order ID: {{ order.id }} - Product: {{ order.product.name }} - Quantity: {{ order.quantity }} - Total Cost: {{order.totalCost}}\n      </li>\n    </ul>\n\n    <table>\n\n      <thead>\n        <tr>\n          <th>Order ID:</th>\n          <th>Product:</th>\n          <th>Quantity:</th>\n          <th>Total Cost:</th>\n        </tr>\n      </thead>\n      <tbody>\n      <tr v-for=\"order in orders\":key=\"user.id\">\n      <td>{{ order.id }}</td>\n      <td>{{order.product.name}}</td>\n      <td>{{order.quantity}}</td>\n      <td>{{order.totalCost}}</td>\n\n      </tr>\n      </tbody>\n\n\n    </table>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    <h3>Place New Order</h3>\n    <form @submit.prevent=\"placeOrder\">\n      <input v-model=\"productId\" type=\"text\" placeholder=\"Product ID\" required />\n      <input v-model=\"quantity\" type=\"number\" placeholder=\"Quantity\" required />\n      <button type=\"submit\">Place Order</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  data() {\n    return {\n      username: localStorage.getItem('username') || 'User',\n      orders: [],\n      productId: '',\n      quantity: '',\n      totalCost:''\n    };\n  },\n  created() {\n    this.checkUserRole();\n    this.fetchOrders();\n  },\n  methods: {\n    checkUserRole() {\n      const role = localStorage.getItem('userRole');\n      if (role !== 'ROLE_USER') {\n        this.$router.push('/login'); // Prevent unauthorized access\n      }\n    },\n\n    async fetchOrders() {\n      try {\n        const token = localStorage.getItem('token');\n        if (!token) {\n          this.$router.push('/login');\n          return;\n        }\n\n        const response = await axios.get('http://localhost:9090/api/orders', {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        this.orders = response.data;\n      } catch (error) {\n        console.error(error);\n        this.$router.push('/login');\n      }\n    },\n\n    async placeOrder() {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await axios.post(\n            'http://localhost:9090/api/orders/submit',\n            { productId: this.productId, quantity: this.quantity },\n            { headers: { Authorization: `Bearer ${token}` } }\n        );\n        this.orders.push(response.data);\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    handleLogout() {\n      localStorage.removeItem('token');\n      localStorage.removeItem('userRole');\n      localStorage.removeItem('username');\n      this.$router.push('/login');\n    },\n  },\n};\n</script>\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;;uBAAtBC,mBAAA,CAuDM,OAvDNC,UAuDM,GAtDJC,mBAAA,CAAgC,YAA5B,WAAS,GAAAC,gBAAA,CAAGC,KAAA,CAAAC,QAAQ,kBACxBH,mBAAA,CAA6C;IAApCI,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,YAAA,IAAAD,QAAA,CAAAC,YAAA,IAAAF,IAAA,CAAY;KAAE,QAAM,G,0BAEpCN,mBAAA,CAAqB,YAAjB,cAAY,sBAChBA,mBAAA,CAIK,c,kBAHHF,mBAAA,CAEKW,SAAA,QATXC,WAAA,CAO0BR,KAAA,CAAAS,MAAM,EAAfC,KAAK;yBAAhBd,mBAAA,CAEK;MAFwBe,GAAG,EAAED,KAAK,CAACE;OAAI,aAChC,GAAAb,gBAAA,CAAGW,KAAK,CAACE,EAAE,IAAG,cAAY,GAAAb,gBAAA,CAAGW,KAAK,CAACG,OAAO,CAACC,IAAI,IAAG,eAAa,GAAAf,gBAAA,CAAGW,KAAK,CAACK,QAAQ,IAAG,iBAAe,GAAAhB,gBAAA,CAAEW,KAAK,CAACM,SAAS;oCAIjIlB,mBAAA,CAqBQ,gB,0BAnBNA,mBAAA,CAOQ,gBANNA,mBAAA,CAKK,aAJHA,mBAAA,CAAkB,YAAd,WAAS,GACbA,mBAAA,CAAiB,YAAb,UAAQ,GACZA,mBAAA,CAAkB,YAAd,WAAS,GACbA,mBAAA,CAAoB,YAAhB,aAAW,E,wBAGnBA,mBAAA,CAQQ,iB,kBAPRF,mBAAA,CAMKW,SAAA,QA7BXC,WAAA,CAuB0BR,KAAA,CAAAS,MAAM,EAAfC,KAAK;yBAAhBd,mBAAA,CAMK;MANuBe,GAAG,EAAEM,IAAA,CAAAC,IAAI,CAACN;QACtCd,mBAAA,CAAuB,YAAAC,gBAAA,CAAhBW,KAAK,CAACE,EAAE,kBACfd,mBAAA,CAA+B,YAAAC,gBAAA,CAAzBW,KAAK,CAACG,OAAO,CAACC,IAAI,kBACxBhB,mBAAA,CAA2B,YAAAC,gBAAA,CAArBW,KAAK,CAACK,QAAQ,kBACpBjB,mBAAA,CAA4B,YAAAC,gBAAA,CAAtBW,KAAK,CAACM,SAAS,iB;gEAuBvBlB,mBAAA,CAAwB,YAApB,iBAAe,sBACnBA,mBAAA,CAIO;IAJAqB,QAAM,EAAAhB,MAAA,QAAAA,MAAA,MAnDjBiB,cAAA,KAAAhB,IAAA,KAmD2BC,QAAA,CAAAgB,UAAA,IAAAhB,QAAA,CAAAgB,UAAA,IAAAjB,IAAA,CAAU;sBAC/BN,mBAAA,CAA2E;IApDjF,uBAAAK,MAAA,QAAAA,MAAA,MAAAmB,MAAA,IAoDsBtB,KAAA,CAAAuB,SAAS,GAAAD,MAAA;IAAEE,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC,YAAY;IAACC,QAAQ,EAAR;iDAAhD1B,KAAA,CAAAuB,SAAS,E,mBACzBzB,mBAAA,CAA0E;IArDhF,uBAAAK,MAAA,QAAAA,MAAA,MAAAmB,MAAA,IAqDsBtB,KAAA,CAAAe,QAAQ,GAAAO,MAAA;IAAEE,IAAI,EAAC,QAAQ;IAACC,WAAW,EAAC,UAAU;IAACC,QAAQ,EAAR;iDAA/C1B,KAAA,CAAAe,QAAQ,E,6BACxBjB,mBAAA,CAA0C;IAAlC0B,IAAI,EAAC;EAAQ,GAAC,aAAW,qB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}